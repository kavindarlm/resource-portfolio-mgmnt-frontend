<div class="container-fluid">
  <div class="row border rounded no-gutters p-2">
    <div class="col-12 col-md-12">
      <div class="resourcebody ">
        <div>
          <div class="border rounded text-center col-12 mb-3 mt-1 pt-1 pb-1 text-white bg-primary">System Resource List
          </div>
        </div>

        <!-- new code-for search bar -->
        <div>
          <!-- search box -->
          <input type="search" [(ngModel)]="searchtext" id="form1" class="form-control" placeholder="Search"
            aria-label="search">
        </div>

        <!-- filter by unit -->
        <div class="row col-12 mt-1">
          <div class="col-6">
            <label for="jobRole">Filter by Job Role:</label>
            <select [(ngModel)]="selectedJobRole" (ngModelChange)="loadResources(selectedJobRole, selectedOrgUnit)"
              class="col-12">
              <option value="" disabled selected>Filter by Job Role</option>
              <option *ngFor="let jobRole of jobRoles" [value]="jobRole">{{ jobRole }}</option>
              <option value="">None</option>
            </select>
          </div>

          <!-- filter by job -->
          <div class="col-6">
            <label for="orgUnit">Filter by Org. Unit:</label>
            <select [(ngModel)]="selectedOrgUnit" (ngModelChange)="loadResources(selectedJobRole, selectedOrgUnit)"
              class="col-12">
              <option value="" disabled selected>Filter by Org Unit</option>
              <option *ngFor="let orgUnit of orgUnits" [value]="orgUnit">{{ orgUnit }}</option>
              <option value="">None</option>
            </select>
          </div>
        </div>

        <div class="table-responsive-sm  table-responsive-md table-responsive">
          <table class="table table-bordered table-striped table-hover table-sm text-center mt-2">
            <thead class="thead-dark fs-6 fst-normal">
              <tr class="">
                <th scope="col" class="col-4 text-center">
                  Resource Id
                </th>
                <th scope="col" class="col-4 text-center">
                  Job Role
                </th>
                <th scope="col" class="col-4 text-center">
                  Org. Unit
                </th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let resource of getPaginatedResourceList() | filter:searchtext">
                <td class="text-center ">{{resource.resourceId}}</td>
                <td class="text-center ">{{resource.roleName}}</td>
                <td class="text-center ">{{resource.unitName}}</td>
                <td>
                  <button class="btn w-100 custom-button btn-sm curser" (click)="onSelect(resource)"
                  [ngClass]="isSelected(resource) ? 'btn-success' : 'btn-outline-success'" > {{ isSelected(resource) ? 'Selected' : 'Select' }} </button>
                </td>
              </tr>
            </tbody>
          </table>

          <!-- table pagination -->
          <div>
            <ul class="pagination pagination-sm justify-content-center">
              <li class="page-item" [class.disabled]="currentPage === 1">
                <a class="page-link" (click)="currentPage = currentPage - 1" aria-label="Previous">
                  <span aria-hidden="true">&laquo;</span>
                  <span class="sr-only">Previous</span>
                </a>
              </li>
              <li class="page-item" *ngFor="let page of [].constructor(totalPages); let i = index"
                [class.active]="currentPage === i + 1">
                <a class="page-link" (click)="currentPage = i + 1">{{ i + 1 }}</a>
              </li>
              <li class="page-item" [class.disabled]="currentPage === totalPages">
                <a class="page-link" (click)="currentPage = currentPage + 1" aria-label="Next">
                  <span aria-hidden="true">&raquo;</span>
                  <span class="sr-only">Next</span>
                </a>
              </li>
            </ul>
          </div>
          <!-- error message -->
          <div *ngIf="errorMessage" class="alert alert-danger">
            {{ errorMessage }}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>