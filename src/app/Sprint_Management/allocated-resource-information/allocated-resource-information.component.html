<div class="border rounded container p-2">
  <div class="row">
    <div class="col-11">
      <div class="border rounded text-center col-12 mb-3 mt-1 pt-1 pb-1 text-white bg-primary">Allocated Resource Information</div>
    </div>
    <div class="col-1">
      <button class="border btn shadow-none bd-highlight shadow p-1 mt-1 mb-3 me-1" (click)="deleteContent()">
        <i class="bi bi-x"></i>
      </button>
    </div>
  </div>


  <div class="row rounded border m-2 p-2 ">
    <div class="col text-center justify-content-center">
      <div class=" border border-4 rounded m-2 p-2">
        <i class="bi bi-person-circle fa-2x mt-3"></i>
        <div>{{ resourceDetails.resourceId }}</div>
        <div class="text-primary">{{ resourceDetails.resourceName }}</div>
        <div class="text-black-50">{{ resourceDetails.job_role?.roleName }}</div>
      </div>
      <div class="border rounded text-center col-12 mb-3 mt-3 pt-1 pb-1 text-white bg-primary bg-opacity-50">
        Current Percentage
      </div>
      <div class="mb-3">
        <label for="availabilitySlider" class="form-label">{{ availabilityPercentage }}</label>
        <input type="range" class="slider" id="availabilitySlider" min="0" max="100" [(ngModel)]="availabilityPercentage" disabled>
      </div>
    </div>
    <div class="col text-center">
      <div class="border rounded text-center col-12 mb-3 mt-1 pt-1 pb-1 text-white bg-primary bg-opacity-50">
        Holiday Calendar
      </div>
      <ngb-datepicker #dp [markDisabled]="disableAllDates" [dayTemplate]="t"></ngb-datepicker>
      <ng-template #t let-date="date" let-focused="focused">
        <span class="custom-day" [class.holiday]="isHoliday(date)" [class.focused]="focused">{{ date.day }}</span>
      </ng-template>
    </div>
  </div>
  <div class="border rounded text-center col-12 mb-3 mt-1 pt-1 pb-1 text-white bg-primary bg-opacity-50">
    Working Percentage
  </div>
  <div class="row justify-content-center">
    <div class="col-11">
      <div class="m-2 p-2" *ngFor="let task of tasksWithProjectInfo; let i = index">

        <div class="row mb-1" *ngFor="let taskInfo of tasksWithProjectInfo; let i = index">
          <!-- Display project name -->
          <div class="col-4 text-center">{{ taskInfo.projectName }}</div>
          <!-- Display task name -->
          <div class="col-3 ms-1 text-center">{{ taskInfo.taskName }}</div>
          <!-- Display resource allocation percentage -->
          <div class="col-2 text-center">{{ taskInfo.percentage }}%</div>
          <!-- Display a delete button -->
          <div class="col-2 text-center">
            <button type="button" class="btn btn-outline-danger" (click)="openDeletePopup(taskInfo.resourceAllocationId, i)">
              <i class="bi bi-trash"></i>
            </button>
          </div>
      </div>
    </div>
  </div>

  <div class="d-flex justify-content-center mb-2 mt-2">
    <button class="btn btn-outline-primary Hover" type="button"
      [routerLink]="['/pages-body/sprint-management/sprintmgt', sprintId, 'UpdatePercentage', sprintId, resourceId]"
      [queryParams]="{ availability: availabilityPercentage }">Add new Percentage</button>

  </div>
  <div class="d-flex justify-content-center mb-2 mt-2">
    <button class="btn btn-outline-primary Hover" type="button"
      [routerLink]="['/pages-body/sprint-management/sprintmgt', sprintId, 'UpdateTask', sprintId, resourceId]"
      [queryParams]="{ availability: availabilityPercentage }">Change Task</button>

  </div>
  
</div>
